<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ROS Web Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/roslib@1/build/roslib.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.138.0/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/eventemitter2@6.4.5/umd/eventemitter2.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/roslib@1/build/roslib.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/ros3d/build/ros3d.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/nipplejs/0.9.0/nipplejs.min.js"></script>
    <script src="http://static.robotwebtools.org/threejs/current/three.min.js"></script>
    <script src="http://static.robotwebtools.org/EventEmitter2/current/eventemitter2.min.js"></script>
    <script src="http://static.robotwebtools.org/roslibjs/current/roslib.min.js"></script>
    <script src="http://static.robotwebtools.org/ros3djs/current/ros3d.min.js"></script>
    <script src="script.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="top-panel">
        <h1>Control Panel</h1>
        <div class="connection-form">
            <input type="text" id="rosbridge-address" placeholder="http://0.0.0.0:9090/">
            <button onclick="connectToROS()">Connect</button>
        </div>
    </div>

    <div class="dashboard">
        <img src="http://0.0.0.0:8080/stream?topic=/camera/image_raw"/ class="image-view" id="camera-feed" alt="Camera Feed">
        <div class="control_feedback">
        <div class="position-display">
            <h3>Robot State</h3>
            <p><strong>Position</strong></p>
            <p>X: <span id="position-x">0</span></p>
            <p>Y: <span id="position-y">0</span></p>
            <p><strong>Velocity</strong></p>
            <p>Linear: <span id="velocity-linear">0</span> m/s</p>
            <p>Angular: <span id="velocity-angular">0</span> rad/s</p>
        </div>
            <div class="joy-display">
                <h2 align="center">Joystick</h2>
                <div class="joystick-container" id="joystick"></div>
            </div>

        </div>
    </div>
    
    <div id="scan-viewer" style="width: 800px; height: 600px; margin: 20px auto; border: 1px solid #ccc;"></div>

    <div class="command-panel">
        <h3>Command Panel</h3>
        <div class="command-buttons">
            <button class="start-btn" onclick="sendStart()">Start</button>
            <button class="stop-btn" onclick="sendStop()">Stop</button>
            <button class="return-btn" onclick="sendReturn()">Return to Base</button>
            <button class="emergency-btn" onclick="sendEmergencyStop()">Emergency Stop</button>
        </div>
    </div>
</body>
</html>

<!-- launch in ros2 workspace - ros2 launch rosbridge_server rosbridge_websocket_launch.xml
launch in webgui workspace - python3 -m http.server 7000 
and navigate to http://0.0.0.0:7000/
connect to http://0.0.0.0:9090/ and launch gazebo simulation to view odometry x,y values in browser 
ros2 run web_video_server web_video_server
-->